<?xml version="1.0" encoding="UTF-8"?>
<regadb-settings>
  <institute>
	<!-- directory for logging files, read/write permissions needed -->  
    <log-dir>/etc/rega_institute/regadb/log</log-dir>
    
    <!-- directory for temporary query results, read/write permissions needed -->
    <query-result-dir>/etc/rega_institute/regadb/query</query-result-dir>
    
    <!-- configuration for belgian wiv queries, omit if not needed -->
    <wiv>
      <!-- the name of the wiv centre -->
      <centre-name>KUL</centre-name>
      
      <!--
      	specify an attribute value to distinguish ARC from ARL patients,
      	only patients with this attribute value will show up in the ARC queries,
      	when omitted, all patients will be used for ARC
      -->
      <arc-patient-filter>
        <attribute name="FOLLOW-UP" group="WIV" value="1: ARC of the same institution as ARL" />
      </arc-patient-filter>
      
      <!--
      	the viral load test type which values will be used for the viral load wiv queries
      	copies/ml will be automatically converted to log10 in the query results
      -->
      <viral-load-testtype>
        <testtype description="Viral Load (copies/ml)" organism="HIV-1" />
      </viral-load-testtype>
    </wiv>
    
    <!--
    	the maximum amount of days a test result's date can deviate from the viral isolate's
    	sample date, for it to be included in a patient's viral isolate resistance report 
    --> 
    <report-date-tolerance>2</report-date-tolerance>
    
    <!--
    	the date format, detailed information on the format:
    	http://java.sun.com/javase/6/docs/api/java/text/SimpleDateFormat.html
    -->
    <date-format>dd/MM/yyyy</date-format>
    <forms>
      <!--
      	patient select form configuration:
      	showSampleIds:		show the sample id column
      	attribte-filter:	the default attribute to be selected in the attribute-column, optional
      	attributes:			the list of attributes to be present in the selection table
      -->
      <form name="datatable.patient.SelectPatientForm" showSampleIds="true">
        <attribute-filter>
          <attribute name="Gender" group="Personal" />
        </attribute-filter>
        <attributes>
          <attribute name="First name" group="Personal" />
          <attribute name="Last name" group="Personal" />
        </attributes>
      </form>
      
      <!-- custom contact form configuration -->
      <form name="form.multipleTestResults.contact">
      	<!-- list of tests in the form -->
        <tests>
          <test description="CD4 Count (generic)" />
          <test description="CD8 Count (generic)" />
          <test description="Viral Load (copies/ml) (generic)" organism="HIV-1" />
        </tests>
        <!--
        	list of events in the form
        	useContactDate: use the contact date as start date of the events
        -->
        <events useContactDate="true">
        	<event name="Pregnancy"/>
        </events>
      </form>
    </forms>
  </institute>
  <!-- Hibernate database connection configuration -->
  <hibernate>
    <property name="hibernate.connection.username">regadb_user</property>
    <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
    <property name="hibernate.connection.password">regadb_password</property>
    <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>
    <property name="hibernate.connection.url">jdbc:postgresql://localhost:5432/regadb</property>
  </hibernate>
  <access-policies>
  	<!--
  		RegaDB can be used in STANDALONE (default) or INTEGRATED mode.
	    Integrated mode bypasses the login-form through the URL, i.e. to log in with 'user1',
	    access the application with the following URL: RegaDB?uid=user1
  	-->
    <access-mode>STANDALONE</access-mode>
    
    <!-- each user is connected to one role -->
    <roles>
      <role>
        <name>admin</name>
        <admin>true</admin>
        
        <!--
        	single-patient-view disables the patient select form and query options
        	when running in integrated mode a patient can be selected through the URL
        	i.e. for accessing patient with id 'p1' in dataset 'ds1' with user 'user1':
        	RegaDB?uid=user1&patient_id=p1&dataset=ds1
        	
        	INTEGRATED mode in combination with single-patient-view allows the access of
        	patients to be delegated to another application
        -->
        <single-patient-view>false</single-patient-view>
        <blocked-attributes/>
      </role>
      <role>
        <name>user</name>
        <admin>false</admin>
        <single-patient-view>true</single-patient-view>
        
        <!-- disabled viewing and editing of certain attributes -->
        <blocked-attributes>
          <attribute name="First name" group="Personal" />
          <attribute name="Last name" group="Personal" />
        </blocked-attributes>
      </role>
    </roles>
  </access-policies>
  <proxies>
  	<!-- a list of proxy servers, with optional authentication -->
    <proxy>
      <url>www-proxy</url>
      <port>3128</port>
      <user>user1</user>
      <password>pass1</password>
    </proxy>
  </proxies>
</regadb-settings>